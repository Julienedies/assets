<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title></title>
    <meta name="description" content="">
    <link type="text/css" rel="stylesheet" href="/assets/css/vendor/normalize.css">
<link type="text/css" rel="stylesheet" href="/assets/css/vendor/main.css">
<link type="text/css" rel="stylesheet" href="/assets/css/common/common.css">
<!--[if lt IE 8]>
    <link rel="stylesheet" href="/assets/css/common/ie-hack.css">
    <![endif]-->
    <style>.icon-sign-peple{
     width:33px;
     height: 32px;
     background: url(/assets/img/newwebsite/user/include/icon-sign-peple.png?__sprite) no-repeat 0 0;
 }
.icon-sign-phone{
    width:33px;
    height: 32px;
    background: url(/assets/img/newwebsite/user/include/icon-sign-phone.png?__sprite) no-repeat 0 0;
}
.icon-sign-email{
    width:33px;
    height: 32px;
    background: url(/assets/img/newwebsite/user/include/icon-sign-email.png?__sprite) no-repeat 0 0;
}


#reg-prompt-box{
    display: none;
}


#mainbody{
    padding-top: 60px;
    min-height: 500px;
    border-top:solid 4px #ff9915;
    border-bottom:solid 4px #ff9915;
    background: url(/assets/img/newwebsite/user/include/sign_03.png?__sprite) no-repeat 50% 0 #1b1c3a;
}

.panel, ._panel, ._panel-1{
    width:563px;
    padding:30px 20px;
    margin: 20px auto;
    background: #fff;
}
._panel-1{
    width: 603px;
    padding: 0;
}
.btn-group .btn{
    text-align: center;
    padding:0;
    min-width:200px;
    width:33%;
    line-height: 70px;
    border-right:solid 1px #cfd8e5;
    background: #e7f1ff;
    font-size: 16px;
    font-weight: bold;
}

.btn-group .btn.active{
    background: #fff;
}

table td{
    vertical-align: top;
    padding:5px 7px;
}

label{
    color:#434a54;
    white-space: nowrap;
    font-weight: bold;
    line-height: 36px;
}

label b{
    color:red;
    margin-right:0.5em;
}

.tip{
    font-family: inherit;
    color:#aab2bd;
}
[ic-scene="select"]{
    margin:0 -20px;
    height: 500px;
    background: #1b1c3a;
}
[ic-scene="select"] .a, [ic-scene="select"] .b{
    padding-top:150px;
    width: 398px;;
    height: 248px;
    background: url(/assets/img/newwebsite/user/include/bg_03.png?__sprite) no-repeat 0 0;
    color: #fff;
    cursor: pointer ;
}
[ic-scene="select"] .b{
    margin-left:90px;
    background: url(/assets/img/newwebsite/user/include/bg_05.png?__sprite) no-repeat 0 0;
}

[ic-scene="select"] h3{
    font-size:32px;
}
[ic-scene="select"] h6{
     font-size:16px;
 }

[role="student-reg-item"]{
    display: none;
}</style>
    <style>.send_verify_email{
	cursor: pointer;
}</style>
    <!-- 如果是英文版本，则输出英文版本css补丁 -->
    <link type="text/css" rel="stylesheet" href="/assets/css/common/common-en.css">
<script type="text/javascript" charset="utf-8" src="/assets/js/vendor/modernizr-2.6.2.min.js"></script>
</head>
<body class="sign">

<div id="wraper">

    <header class="wrap-1000 hr">
        <a href="#" class="fl"><i class="icon icon-logo"></i> </a>
        <div class="inline lg-60">
            <a href="#" class="btn btn-0-2 t-14-1-y1 mr-15">已有账号，立即登录</a>
            <a href="#" class="btn btn-0-1 t-14-1-k1">EN</a>
        </div>
        <div class="clearfix"></div>
    </header>

    <div id="mainbody" ic-ctrl="mainCtrl">

        <div class="wrap-1000">

            <section ic-scene="select">

    <h1 class="hc t-24-1-w">请选择注册类型</h1>

    <div class="hc">

        <div class="inline a" ic-role-scene-next="normal-reg" role="normal">
            <h3 class="fz-32">普通用户</h3>
            <h6>点击注册</h6>
        </div>

        <div class="inline b" ic-role-scene-next="normal-reg" role="student">
            <h3>学生用户</h3>
            <h6>点击注册</h6>
        </div>

    </div>

</section>

            <section ic-scene="normal-reg">

    <h1 class="hc t-24-1-w">请选择注册方式并注册</h1>

    <div class="_panel-1 fc-a3">

        <h3 class="btn-group" ic-tabs="sign" ic-tab-select="span" ic-con-select="section">

                    <span class="btn">
                        <i class="icon icon-sign-phone"></i> <b class="vm">手机注册</b>
                    </span>

                    <span class="btn">
                        <i class="icon icon-sign-peple"></i> <b class="vm">账号注册</b>
                    </span>

                     <span class="btn">
                        <i class="icon icon-sign-email"></i> <b class="vm">邮箱注册</b>
                    </span>
        </h3>

        <div class="form" style="padding: 40px 30px;" ic-role-tabc="sign">

            <!-- 手机注册-->
<section ic-ctrl="mobileSignUpCtrl" ic-form="mobile-phone-sign-up">

    <table>
        <tr>
            <td class="hr">
                <label><b>*</b>手机号码:</label>
            </td>
            <td>
                <input type="text"
                       class="input-text-md"
                       ic-role-field="mobile-phone"
                       ic-field-rule="phone"
                       ic-field-err-tip="请输入有效的手机号码"
                       ic-field-verify-fire="1"
                       name="mobile"
                       role=""/>

                <p class="tip" ic-role-field-err-tip="mobile-phone">目前仅支持中国大陆手机号</p>
            </td>
        </tr>

        <tr>
            <td class="hr">
                <label><b>*</b>验证码:</label>
            </td>
            <td>
                <div class="inline">
                    <input type="text"
                           class="input-text-sm"
                           ic-role-field="captcha"
                           ic-field-rule="/^\w{4}$/"
                           ic-field-err-tip="请输入正确的验证码"
                           name="captcha"
                           role="captcha"/>

                    <p class="tip" style="width:10em;" ic-role-field-err-tip="captcha">请输入图中的验证码，不区分大小写</p>
                </div>
                <div class="inline">
                    <img src="{#$account_url#}/user/captcha/v6" height="44" class="vm" role="captchaImg">

                    <div class="hc"><span class="btn" role="changeCaptcha">换一张</span></div>
                </div>
            </td>
        </tr>

        <tr>
            <td class="hr">
                <label><b>*</b>手机验证码:</label>
            </td>
            <td>
                <div class="inline">
                    <input type="text"
                           class="input-text-sm"
                           ic-role-field="mobileCaptcha"
                           ic-field-rule="/^\d{6}$/"
                           ic-field-err-tip="请输入正确的手机验证码"
                           name="mobilecaptcha"
                           role="mobileCaptcha"/>
                    <input type="hidden" name="mobile_type" value="regist"  role="getMobileCaptcha"/>
                    <p class="tip" ic-role-field-err-tip="mobileCaptcha">输入手机收到的验证码</p>
                </div>
                <div class="inline" ic-ctrl="mobileCaptchaCtrl">
                    <button class="btn btn-md btn-b1 disabled"
                            ic-ajax="getMobileCaptcha"
                            ic-submit-action="/user/getMobileCaptcha/"
                            ic-submit-method="post"
                            ic-submit-data=""
                            ic-submit-before="before"
                            ic-submit-on-done="done"
                            role="getMobileCaptcha">获取手机验证码</button>
                </div>
            </td>
        </tr>

        <tr>
            <td class="hr">
                <label><b>*</b>密码:</label>
            </td>
            <td>
                <input type="password"
                       class="input-text-md"
                       ic-role-field="password"
                       ic-field-rule="password"
                       ic-field-err-tip="请输入正确的密码"
                       name="password"
                       role="password"/>

                <p class="tip" ic-role-field-err-tip="password" role="msg">长度不得少于8位，可使用数字/字母/符号</p>
            </td>
        </tr>

        <tr role="student-reg-item">
            <td class="hr">
                <label><b>*</b>所在学校:</label>
            </td>
            <td>
                <input type="text"
                       class="input-text-md"
                       ic-role-field="school"
                       ic-field-rule="/.{4,}/"
                       ic-field-err-tip="请输入正确的学校名称"
                       name="university"
                       role="school"/>

                <p class="tip" ic-role-field-err-tip="school"></p>
            </td>
        </tr>

        <tr role="student-reg-item">
            <td class="hr">
                <label><b>*</b>入学时间:</label>
            </td>
            <td>
                <input type="text"
                       placeholder="格式: 2013/04"
                       class="input-text-sm"
                       ic-role-field="admission-date"
                       ic-field-rule="checkAdmissionDate()"
                       ic-field-err-tip="请输入正确的入学时间"
                       name="entrancetime"
                       role=""/>

                <p class="tip" ic-role-field-err-tip="admission-date"></p>
            </td>
        </tr>

        <tr role="student-reg-item">
            <td class="hr">
                <label><b>*</b>在读身份:</label>
            </td>
            <td>
                <select
                        class="input-text-sm"
                        style="width:12em;"
                        name="education"
                        ic-role-field="position"
                        ic-field-rule="required"
                        ic-field-err-tip="请选择在读身份"
                        role="">
                    <option value='1'>大专</option>
                    <option value='2'>本科</option>
                    <option value='4'>硕士学位</option>
                    <option value='5'>博士学位</option>
                </select>

                <p class="tip" ic-role-field-err-tip="position" role="msg"></p>
            </td>
        </tr>

        <tr>
            <td></td>
            <td>
                <input type="hidden" name="" ic-role-field="userType" value="0"><!--定义用户类型-->
                <input type="hidden" name="type" ic-role-field="type" value="mobile" /><!--定义注册类型-->
                <input type="checkbox" checked="true" disabled>
                <span>同意并愿意遵守数库的<a href="#" target="_blank" class="fc-y1">《隐私保护政策》</a></span>
            </td>
        </tr>
        <tr>
            <td></td>
            <td>
                <button class="btn btn-1-1"
                        ic-submit-action="/user/register"
                        ic-submit-method="post"
                        ic-submit-before="before"
                        ic-submit-on-done="done"
                        ic-role-submit="mobile-phone-sign-up">立即注册</button>
                        
            </td>
        </tr>

    </table>

</section>

            <!-- 账号注册-->
<section ic-ctrl="idSignUpCtrl" ic-form="id-sign-up">
    <table>
        <tr>
            <td class="hr">
                <label><b>*</b>数库账号:</label>
            </td>
            <td>
                <input type="text"
                       class="input-text-md"
                       ic-role-field="id"
                       ic-field-rule="id"
                       ic-field-err-tip="请输入正确的帐号名"
                       role="" />

                <p class="tip" ic-role-field-err-tip="id" role="msg">账号名为6-18位数字、字母和下划线</p>
            </td>
        </tr>

        <tr>
            <td class="hr">
                <label><b>*</b>密码:</label>
            </td>
            <td>
                <input type="password"
                       class="input-text-md"
                       ic-role-field="password"
                       ic-field-rule="password"
                       ic-field-err-tip="请输入正确的密码"
                       role="password" />

                <p class="tip" ic-role-field-err-tip="password" role="msg">长度不得少于8位，可使用数字/字母/符号</p>
            </td>
        </tr>

        <tr>
            <td class="hr">
                <label><b>*</b>确认密码:</label>
            </td>
            <td>
                <input type="password"
                       class="input-text-md"
                       ic-role-field="confirm-password"
                       ic-field-rule="password&&equal()"
                       ic-field-err-tip="请确认密码"
                       role="confirm-password" />

                <p class="tip" ic-role-field-err-tip="confirm-password" role="msg">请再次输入密码</p>
            </td>
        </tr>

        <tr role="student-reg-item">
            <td class="hr">
                <label><b>*</b>所在学校:</label>
            </td>
            <td>
                <input type="text"
                       class="input-text-md"
                       ic-role-field="school"
                       ic-field-rule="/.{4,}/"
                       ic-field-err-tip="请输入正确的学校名称"
                       role="school"/>

                <p class="tip" ic-role-field-err-tip="school"></p>
            </td>
        </tr>

        <tr role="student-reg-item">
            <td class="hr">
                <label><b>*</b>入学时间:</label>
            </td>
            <td>
                <input type="text"
                       placeholder="格式: 2013/04"
                       class="input-text-sm"
                       ic-role-field="admission-date"
                       ic-field-rule="checkAdmissionDate()"
                       ic-field-err-tip="请输入正确的入学时间"
                       role=""/>

                <p class="tip" ic-role-field-err-tip="admission-date"></p>
            </td>
        </tr>

        <tr role="student-reg-item">
            <td class="hr">
                <label><b>*</b>在读身份:</label>
            </td>
            <td>
                <select
                        class="input-text-sm"
                        style="width:12em;"
                        name="education"
                        ic-role-field="position"
                        ic-field-rule="required"
                        ic-field-err-tip="请选择在读身份"
                        role="">
                    <option value='1'>大专</option>
                    <option value='2'>本科</option>
                    <option value='3'>学士学位</option>
                    <option value='4'>硕士学位</option>
                    <option value='5'>博士学位</option>
                </select>

                <p class="tip" ic-role-field-err-tip="position" role="msg"></p>
            </td>
        </tr>

        <tr>
            <td class="hr">
                <label><b>*</b>验证码:</label>
            </td>
            <td>
                <div class="inline">
                    <input type="text"
                           class="input-text-sm"
                           ic-role-field="captcha"
                           ic-field-rule="/^\w{4}$/"
                           ic-field-err-tip="请输入正确的验证码"
                           role="captcha"/>

                    <p class="tip" style="width:10em;" ic-role-field-err-tip="captcha">请输入图中的验证码，不区分大小写</p>
                </div>
                <div class="inline">
                    <img src="{#$www_url#}/user/captcha/v3" height="44" class="vm" role="captchaImg">

                    <div class="hc"><span class="btn" role="changeCaptcha">换一张</span></div>
                </div>
            </td>
        </tr>

        <tr>
            <td></td>
            <td>
                <input type="hidden" name="" ic-role-field="userType" value="0"><!--定义用户类型-->
                <input type="hidden" name="type" ic-role-field="type" value="username" /><!--定义注册类型-->
                <input type="checkbox" checked="true" disabled>
                <span>同意并愿意遵守数库的<a href="#" target="_blank" class="fc-y1">《隐私保护政策》</a></span>
            </td>
        </tr>

        <tr>
            <td></td>
            <td>
                <button class="btn btn-1-1"
                        ic-role-submit="id-sign-up"
                        ic-submit-action="/user/register"
                        ic-submit-method="post"
                        ic-submit-before="before"
                        ic-submit-on-done="done"
                        role="signUp">立即注册</button>
            </td>
        </tr>
    </table>

</section>

            <!-- 邮箱注册-->
<section ic-ctrl="emailSignUpCtrl" ic-form="email-sign-up">
    <table>
        <tr>
            <td class="hr">
                <label><b>*</b>电子邮箱:</label>
            </td>
            <td>
                <input type="text"
                       class="input-text-md"
                       ic-role-field="email"
                       ic-field-rule="email"
                       ic-field-err-tip="请输入正确的邮箱"
                       role="email">

                <p class="tip" ic-role-field-err-tip="email" role="msg">请输入有效的邮箱地址</p>
            </td>
        </tr>

        <tr role="student-reg-item">
            <td class="hr">
                <label><b>*</b>所在学校:</label>
            </td>
            <td>
                <input type="text"
                       class="input-text-md"
                       ic-role-field="school"
                       ic-field-rule="/.{4,}/"
                       ic-field-err-tip="请输入正确的学校名称"
                       role="school"/>

                <p class="tip" ic-role-field-err-tip="school"></p>
            </td>
        </tr>

        <tr role="student-reg-item">
            <td class="hr">
                <label><b>*</b>入学时间:</label>
            </td>
            <td>
                <input type="text"
                       class="input-text-sm"
                       placeholder="格式: 2013/04"
                       ic-role-field="admissionDate"
                       ic-field-rule="checkAdmissionDate()"
                       ic-field-err-tip="请输入正确的入学时间"
                       role=""/>

                <p class="tip" ic-role-field-err-tip="admissionDate"></p>
            </td>
        </tr>

        <tr role="student-reg-item">
            <td class="hr">
                <label><b>*</b>在读身份:</label>
            </td>
            <td>
                <select
                        class="input-text-sm"
                        style="width:12em;"
                        name="education"
                        ic-role-field="position"
                        ic-field-rule="required"
                        ic-field-err-tip="请选择在读身份"
                        role="">
                    <option value='1'>大专</option>
                    <option value='2'>本科</option>
                    <option value='4'>硕士学位</option>
                    <option value='5'>博士学位</option>
                </select>

                <p class="tip" ic-role-field-err-tip="position" role="msg"></p>
            </td>
        </tr>

        <tr>
            <td class="hr">
                <label><b>*</b>验证码:</label>
            </td>
            <td>
                <div class="inline">
                    <input type="text"
                           class="input-text-sm"
                           ic-role-field="captcha"
                           ic-field-rule="/^\w{4}$/"
                           ic-field-err-tip="请输入正确的验证码"
                           role="captcha"/>

                    <p class="tip" style="width:10em;" ic-role-field-err-tip="captcha">请输入图中的验证码，不区分大小写</p>
                </div>
                <div class="inline">
                    <img src="{#$www_url#}/user/captcha/v4" height="44" class="vm" role="captchaImg">

                    <div class="hc"><span class="btn" role="changeCaptcha">换一张</span></div>
                </div>
            </td>
        </tr>

        <tr>
            <td></td>
            <td>
                <input type="hidden" name="" ic-role-field="userType" value="0"><!--定义用户类型-->
                <input type="hidden" name="type" ic-role-field="type" value="email" /><!--定义注册类型-->
                <input type="checkbox" checked="true" disabled>
                <span>同意并愿意遵守数库的<a href="#" target="_blank" class="fc-y1">《隐私保护政策》</a></span>
            </td>
        </tr>

        <tr>
            <td></td>
            <td>
                <button class="btn btn-1-1"
                        ic-submit-action="/user/sendverifyemail"

                        ic-submit-method="post"
                        ic-submit-before="before"
                        ic-submit-on-done="done"
                        ic-submit-on-failed="failed"
                        ic-role-submit="email-sign-up"
                        role="signUp">立即注册
                </button>
            </td>
        </tr>
    </table>

    <div class="hc lg-36 t-18-1-a1" style="display: none;" ic-ctrl="resendEmailCtrl">
        系统已经发送验证邮件到您的电子邮箱
        <br>
        点击邮件内链接即可完成注帐号册
        <br>
        <br>

        <div class="t-14-0-a1">
            没有收到？
            <br>
            点击<a href="javascript:void(0);" class="fc-y1"
                 ic-ajax="resendEmail"
                 ic-submit-action="/user/resendMail"
                 ic-submit-method="post"
                 ic-submit-before="before"
                 ic-submit-on-done="done"
                 ic-submit-on-failed="failed"
                 role="resendEmail">这里</a>再次发送验证邮件
        </div>
    </div>

    <div class="dialog hc p-20-0" ic-dialog="resendEmailOk">
        <br>
        <div><i class="icon icon-dialog-ok"></i></div>
        <div>邮件已在此发送</div>
        <br>
        <button class="btn btn-1" ic-role-dialog-confirm>确定</button>
        <br>
    </div>
</section>

        </div>
    </div>

</section>

        </div>

    </div>

    <div id="reg-prompt-box" class="h-center fc-1">
    <div class="fz-16">还没有数库账号？想获得更多数据？</div>
    <div class="fz-20 m-10-0">立即注册，拥有前所未有</div>
    <div><a href="#" target="_blank"  class="btn btn-1-1">免费注册</a></div>

    <!-- 登录弹出框 -->
    <div class="dialog" ic-dialog="login">
        <button class="btn btn-close icon icon-x-black" ic-rold-dialog-close></button>
        
<div class="w-480 p-20-0" ic-ctrl="loginCtrl">


    <h1 class="hc lg-42 t-18-1-a1">登录我的数库</h1>

    <div class="hc form" ic-form="login">

        <div class="tip error" role="status"></div>

        <div class="inline hl">
            <div class="mt-15">
                <input type="text"
                       class="input-text-md"
                       placeholder="用户名/手机号码/电子邮箱"
                       ic-role-field="id"
                       ic-field-rule="id||phone||email"
                       ic-field-err-tip="请输入有效的用户名/手机号码/电子邮箱"
                       role="" />
                <p class="tip error" ic-role-field-err-tip="id"></p>
            </div>

            <div class="mt-15">
                <input type="text"
                       class="input-text-md"
                       placeholder="密码"
                       ic-role-field="password"
                       ic-field-rule="password"
                       ic-field-err-tip="请输入正确的密码"
                       role="">
                <p class="tip error" ic-role-field-err-tip="password"></p>
            </div>

            <div class="hr mt-10">
                <label class="fl"><input type="checkbox"
                                         value="1"
                                         onclick="this.value=this.checked?1:0;"
                                         ic-role-field="remember"
                                         checked> 记住我</label>
                <a href="#" class="fc-y1">忘记密码？</a>
            </div>

            <div class="mt-10">
                <button class="btn btn-1-1 btn-md-1-1"
                        ic-role-submit="login"
                        ic-submit-action="/user/dologin"
                        ic-submit-method="post"
                        ic-submit-before="before"
                        ic-submit-on-done="done"
                        ic-submit-on-failed="failed">登 录</button>
            </div>

            <div class="hr mt-10">
                <span class="fl fc-a0">还没有帐号？ </span>
                <a href="#" class="fc-y1">立即注册</a>
            </div>

        </div>
    </div>

</div>

    </div>
</div>

<footer id="footer" class="fy-1">

    <div class="wrap-1000">
        <div id="csf" class="inline v-top br-1 hc" style="width: 160px;">
                <i class="icon icon-logo"></i>
                <br/>
                <br/>
                <br/>
                <h4 class="">金融大数据专家</h4>
        </div>

        <div id="site" class="inline v-top br-1 hc" style="width:120px;">
            <ul>
                <li><a href="#" target="_blank" >关于数库</a> </li>
                <li><a href="#" target="_blank" >产品介绍</a> </li>
                <li><a href="#" target="_blank" >加入我们</a> </li>
                <li><a href="#" target="_blank" >版权声明</a> </li>
            </ul>
        </div>

        <div id="interface" class="inline v-top br-1">
            <h4>关注我们</h4>
            <ul class="inline-list">
                <li><a href="#" target="_blank"  class="inline"><i class="icon icon-wx"></i></a> </li>
                <li><a href="#" target="_blank"  class="inline"><i class="icon icon-wb"></i></a> </li>
                <li><a href="#" target="_blank"  class="inline"><i class="icon icon-g"></i></a> </li>
                <li><a href="#" target="_blank"  class="inline"><i class="icon icon-tt"></i></a> </li>
                <li><a href="#" target="_blank"  class="inline"><i class="icon icon-f"></i></a> </li>
                <li><a href="#" target="_blank"  class="inline"><i class="icon icon-i"></i></a> </li>
            </ul>
        </div>

        <div id="sky" class="inline v-top br-1 hc" style="width: 200px;">
            <h4 class="">数据云</h4>
            <br/>
            <i class="icon icon-sky"></i>
        </div>

        <div id="et" class="inline v-top hc" style="width:110px;">
            <h4>企业时间</h4>
            <a href="#" target="_blank"  class="inline"><i class="icon icon-et"></i></a>
        </div>


        <div id="partner" class="">
            <h4>合作伙伴</h4>
            <ul class="inline-list">
                <li><a href="#" target="_blank"><i class="icon icon-xlcj"></i></a> </li>
                <li><a href="#" target="_blank"><i class="icon icon-jjgcb"></i></a> </li>
                <li><a href="#" target="_blank"><i class="icon icon-pfyh"></i></a> </li>
            </ul>
        </div>

        <p class="mt-15 hc t-4">© 2014 ChinaScope Financial All Rights Reserved</p>
    </div>

</footer>


</div>

<div class="dialog" ic-dialog="">
<div class="hc"></div>
<button class="btn btn-md btn-1" ic-role-dialog-confirm>确定</button>
<button class="btn btn-md btn-1"ic-role-dialog-cancel>取消</button>
</div>


<script type="text/javascript" charset="utf-8" src="/assets/js/vendor/underscore-1.6.0.min.js"></script>
<script type="text/javascript" charset="utf-8" src="/assets/js/vendor/jquery/jquery-1.10.2.min.js"></script>
<script type="text/javascript" charset="utf-8" src="/assets/js/vendor/plugins.js"></script>
<script type="text/javascript" charset="utf-8" src="/assets/js/brick/brick.js"></script>
<script type="text/javascript" charset="utf-8" src="/assets/js/common/lang.js"></script>
<script type="text/javascript" charset="utf-8" src="/assets/js/common/common.js"></script>
<script>/**
 * Created by julien.zhang on 2014/10/16.
 */

//主控制器
brick.controllers.reg('mainCtrl', function (scope) {

    //检测入学时间
    scope.checkAdmissionDate = function (val) {
        var current = new Date().getFullYear();
        var start = current - 10;
        val = val.split('/')
        var year = val[0] * 1;
        var month = val[1] * 1;
        return /\d{4}/.test(year) && year <= current && year > start && /\d{1,2}/.test(month) && month > 0 && month < 13;
    };

    //选择注册方式
    $('[role=normal], [role=student]').on('click', function (e) {
        var role = $(this).attr('role');

        //普通用户
        if (role === 'normal') {
            $('[ic-role-field="userType"]').val('1');
            //do something
        } else {
            $('[ic-role-field="userType"]').val('2');
            $('[role=student-reg-item]').show();
        }

    });


    //更新验证码
    var $changeCaptcha = $('[role=changeCaptcha]');
    $changeCaptcha.on('click', function (e) {
        var $captchaImg = $(this).parent().parent().find('[role=captchaImg]');
        var src = $captchaImg.attr('src').replace(/\?time=\d+$/, '');
        $captchaImg.attr('src', src + '?time=' + (+new Date));
    });

});


//手机验证码控制器
brick.controllers.reg('mobileCaptchaCtrl', function (scope) {

    var $getPhoneCaptcha = $('[role=getMobileCaptcha]');

    //如果输入正确的手机号码，则获取手机验证码按钮可用;
    $('[ic-role-field="mobile-phone"]')
        .on('blue', function (e) {
            $(this).change();
        })
        .on('ic-form.mobile-phone-sign-up.mobile-phone.verify', function (e, isOk) {
            isOk ? $getPhoneCaptcha.removeClass('disabled') :
                $getPhoneCaptcha.addClass('disabled');
        });


    scope.before = function () {

        if ($getPhoneCaptcha.hasClass('disabled')) return false;

        var data = {};
        var field = $('[ic-role-field="mobile-phone"]');
        var name = field.attr('name') || 'mobile';
        var type = $('[role="getMobileCaptcha"]');
        var captcha = $('[ic-role-field="captcha"]');
        data[name] = field.val();
        data[type.attr('name')] = type.val();
        data[captcha.attr('name')] = captcha.val();
        $getPhoneCaptcha.data('ic-submit-data', data);

    };

    scope.done = function (data) {

        /*
         1:  发送成功， 一切OK
         2:  未知错误的发送失败，可能是手机商的问题
         3:  安全问题，过于频繁，要求输入验证码
         4： 这个手机号已被注册，不能使用。
         */

        switch (data) {
            case "1":
                $.tips('发送成功');
                reGetphc();
                break;
            case "2":
                alert('未知错误的发送失败，可能是手机商的问题');
                break;
            case "3":
                break;
            case "4":
                alert('这个手机号已被注册，不能使用');
                break;
            case "7":
                alert('验证码错误');
                break;
        }
    };


    function reGetphc() {
        var tip = $('<span style="font-size:0.8em; line-height: 36px;">如果没有收到， <b>90</b>秒后重新获取.</span>');
        var b = tip.find('b');
        var c = $getPhoneCaptcha.hide().after(tip);
        var n = 90;

        var timer = setInterval(function () {
            if (n--) {
                b.text(n);
            } else {
                clearInterval(timer);
                tip.remove();
                c.show();
            }
        }, 1000);
    }

});


//手机注册控制器
brick.controllers.reg('mobileSignUpCtrl', function (scope) {

    scope.before = function (fields) {

    };

    scope.done = function (data) {
        /*
         1:  注册成功， 一切OK
         2:  验证码不匹配
         3:  手机号被改过
         4： 密码错误。
         5:  手机号已经被注册掉。
         6： 系统错误
         */
        var _data = $.parseJSON(data);

        switch (_data.code) {
            case "1":
                alert('注册成功.');
                break;
            case "2":
                alert('手机验证码不匹配');
                break;
            case "3":
                alert('手机号被改过');
                break;
            case "5":
                alert('手机号已经被注册掉');
                break;
            case "6":
                alert('系统错误');
                break;
            case "7":
                alert('图片验证码不匹配');
                break;
            case "8":
                alert('手机号被改过');
                break;
        }
    };


});

//帐号注册控制器
brick.controllers.reg('idSignUpCtrl', function (scope) {

    var $elm = $('[ic-ctrl="idSignUpCtrl"]');

    var $pass = $elm.find('[ic-role-field="password"]');

    scope.before = function (fields) {

    };

    scope.done = function (data) {
        var _data = $.parseJSON(data);

        switch (_data.code) {
            case "7":
                alert('验证码错误');
                break;
            case "6":
                alert('密码和确认密码不匹配');
                break;
            case "3":
                alert('手机号被改过');
                break;
            case "5":
                alert('手机号已经被注册掉');
                break;
        }
    }


    scope.equal = function (val) {
        return val === $pass.val();
    }


});


//email注册控制器
brick.controllers.reg('emailSignUpCtrl', function (scope) {

    var $elm = $('[ic-ctrl="emailSignUpCtrl"]');


    scope.before = function (fields) {
        scope.email = fields.email;
    };

    scope.done = function (data) {
      
        var _data = $.parseJSON(data);
         switch (_data.code) {
            case "7":
                alert('验证码错误');
                break;
            case "6":
                alert('密码和确认密码不匹配');
                break;
            case "5":
                alert('邮箱已存在');
                break;
            case "1":
                var table = $elm.find('table').hide();
                table.next().show();
                break;
        }
    }

    scope.failed = function () {
        $.tips('error');
    };

});



brick.controllers.reg('resendEmailCtrl', function(scope){

    scope.before = function () {
        var email = brick.controllers.get('emailSignUpCtrl').email;
        $('[ic-ajax=resendEmail]').data('ic-submit-data', {email:email});
    };

    scope.done = function (data) {
        $('[ic-dialog=resendEmailOk]').icDialog();
    }

    scope.failed = function () {
    };


});




</script>
<script type="text/javascript" charset="utf-8" src="http://192.168.0.178:8132/livereload.js"></script></body>
</html>
